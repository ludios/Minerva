<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>XDRFrame (dev)</title>
</head>
<body>
<!--
	Note: for the __XDRSetup call to work, document.domain
	on parent page must be set *before* the browser starts executing
	code in the iframe. -->
<script>
	document.domain = {{ domain }};
	var parentUrlSplit = parent.location.href.split("/");
	while(parentUrlSplit.length != 3) {
		parentUrlSplit.pop();
	}
	var parentUrl = parentUrlSplit.join("/");
	// Load JavaScript from the parent's domain instead of our own subdomain,
	// subdomain is always random and the resources would not be usefully
	// cached.
	// TODO: server-side "jsdomain" option, instead of grabbing the parent's URL.
	document.write('<script>CLOSURE_NO_DEPS = true;<\/s' + 'cript>');
	document.write('<script src="' + parentUrl + '/JSPATH/closure/goog/base.js"><\/s' + 'cript>');
</script>
<script>
	document.write('<script src="' + parentUrl + '/JSPATH/all_deps.js"><\/s' + 'cript>');
</script>
<script>
	goog.require('cw.net.XHRSlave');
	goog.require('cw.net.setupXDRFrame');
</script>
<script>
	cw.net.setupXDRFrame({{ frameNum }}, {{ frameId }});
</script>
</body>
</html>
